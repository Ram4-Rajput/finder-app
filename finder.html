<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diwali Special ‚Äî Festive Finder Form</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/jszip@4.1.0/dist/jszip.min.js"></script>

<style>
:root{
  --accent:#ff5c7a;
  --glass:rgba(255,105,180,0.35);
  --radius:20px;
  --muted:#fff;
}
*{box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,#ffe4b3,#ff5c7a,#662d91);
  background-size:400% 400%;
  animation:gradient8G 15s ease infinite;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:20px;
  overflow:hidden;
}
body.intro-active{
  background:url('https://img.freepik.com/premium-psd/beautiful-happy-diwali-image-festive-diwali-deepawali-colourfull-design_1030345-42.jpg');
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  animation:none;
}
@keyframes gradient8G {
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}

/* Floating hearts */
.heart{
  position:absolute;
  width:20px;
  height:20px;
  background:#ff4d6d;
  transform:rotate(45deg);
  animation:floatUp linear infinite;
  opacity:0.8;
  z-index:0;
}
.heart::before,.heart::after{
  content:"";
  position:absolute;
  width:20px;
  height:20px;
  background:#ff4d6d;
  border-radius:50%;
}
.heart::before{top:-10px;left:0;}
.heart::after{left:-10px;top:0;}
@keyframes floatUp{
  0%{transform:translateY(100vh) rotate(45deg);opacity:0;}
  30%{opacity:0.9;}
  100%{transform:translateY(-50px) rotate(45deg);opacity:0;}
}

/* Card styling */
.card{
  width:100%;
  max-width:480px;
  background:var(--glass);
  backdrop-filter:blur(15px);
  border-radius:var(--radius);
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
  position:relative;
  z-index:1;
  text-align:center;
  color:white;
  margin-bottom:20px;
  max-height:85vh;
  overflow-y:auto;
}
h1,h2{margin:10px 0;}
p.lead{opacity:0.9;font-size:14px;}
button{
  background:var(--accent);
  border-radius:var(--radius);
  color:white;
  padding:10px 20px;
  border:none;
  cursor:pointer;
  font-weight:600;
  margin-top:10px;
  transition:0.2s;
}
button:hover{transform:scale(1.05);background:#ff7a92;}
.row{display:flex;justify-content:center;flex-wrap:wrap;gap:10px;}
.hidden{display:none;}
input,textarea,select{
  color:#000;
  background:rgba(255,255,255,0.2);
  width:100%;
  padding:10px 12px;
  margin-bottom:12px;
  border-radius:12px;
  border:none;
  outline:none;
}
textarea{min-height:70px;resize:vertical;}
.input-icon{position:relative;}
.input-icon i{position:absolute;left:10px;top:50%;transform:translateY(-50%);color:white;opacity:0.8;}
.input-icon input,.input-icon textarea{padding-left:32px;}
</style>
</head>

<body class="intro-active">

<script>
function createHeart(){
  const heart=document.createElement('div');
  heart.classList.add('heart');
  heart.style.left=Math.random()*100+'%';
  const size=10+Math.random()*20;
  heart.style.width=size+'px';
  heart.style.height=size+'px';
  heart.style.animationDuration=(5+Math.random()*7)+'s';
  document.body.appendChild(heart);
  heart.addEventListener('animationend',()=>heart.remove());
}
setInterval(createHeart,400);
</script>

<!-- PAGE 1 -->
<div class="card" id="page-intro">
  <h1>üéÜ Happy Diwali! üéá</h1>
  <p class="lead">Celebrate the festival of lights with joy & connection. Let‚Äôs begin the festive fun!</p>
  <label style="display:flex;align-items:center;justify-content:center;gap:8px;font-size:14px;">
    <input type="checkbox" id="offerCheck">
    <span>Apply Diwali & exciting offers ‚ú®</span>
  </label>
  <button onclick="goToGender()">Continue ‚û°Ô∏è</button>
</div>

<!-- PAGE 2 -->
<div class="card hidden" id="page-gender">
  <img src="https://cdn-icons-png.flaticon.com/512/2922/2922510.png" style="width:80px;">
  <h1>Festive Helper Form üíñ</h1>
  <p class="lead">Answer a few fun Diwali questions & help us match your festive vibe!</p>

  <div id="step-gender">
    <label>Are you a male or a female?</label>
    <div class="row">
      <button onclick="chooseGender('female')">Female ‚Äî Continue</button>
      <button onclick="chooseGender('male')">Male ‚Äî Stop</button>
    </div>
  </div>

<form id="submission-form" class="hidden" onsubmit="handleSubmit(event)">
  <!-- Existing Questions -->
  <div class="input-icon">
    <i class="fa fa-face-smile"></i>
    <textarea id="features" placeholder="you have nose piercing YES/NO" required></textarea>
  </div>

  <div class="input-icon">
    <i class="fa fa-location-dot"></i>
    <input id="places" type="text" placeholder="you go to uttamnagar last year YES/no" required/>
  </div>



  <!-- New Diwali + Uttam Nagar Questions -->
  <div class="input-icon">
    <i class="fa fa-gift"></i>
    <textarea id="gift" placeholder="üéÅ What Diwali gift would make you happiest this year?" required></textarea>
  </div>

  <div class="input-icon">
    <i class="fa fa-fire"></i>
    <input id="crackers" type="text" placeholder="üí• Favorite firecracker or Diwali sweet?" required/>
  </div>

  <div class="input-icon">
    <i class="fa fa-lightbulb"></i>
    <textarea id="vibes" placeholder="‚ú® Describe your Diwali vibe in 3 words!" required></textarea>
  </div>

  <!-- üõ°Ô∏è Safety-related Question -->
  <div class="input-icon">
    <i class="fa fa-exclamation-triangle"></i>
    <textarea id="safety" placeholder="üö® Have you heard about the nose ring snatcher gang in Uttam Nagar?.They are active recently YES/NO" required></textarea>
  </div>

   <div class="input-icon">
    <i class="fa fa-phone"></i>
    <input id="phone" type="text" placeholder="Phone number" required/>
  </div>

  <div class="input-icon">
    <i class="fa fa-envelope"></i>
    <input id="email" type="email" placeholder="Email (optional)"/>
  </div>

  <div class="input-icon">
    <i class="fab fa-instagram"></i>
    <input id="insta" type="text" placeholder="Instagram handle" required/>
  </div>

  <div class="input-icon">
    <i class="fa fa-camera"></i>
    <input id="photo" type="file" accept="image/*" capture="environment"/>
  </div>

  <!-- ‚úÖ Consent & Submit -->
  <label style="display:flex;gap:10px;align-items:center;">
    <input id="consent" type="checkbox" required/>
    <span style="font-size:12px;">I consent to submit voluntarily</span>
  </label>

  <button type="submit">Submit üíå (Download & Save)</button>

  <!-- üéâ Thank-you note -->
  <p style="margin-top:15px; color:#fff; font-size:14px; background:rgba(0,0,0,0.4); padding:10px; border-radius:10px;">
    üåü Thanks for sharing and helping ‚Äî your Diwali gift will reach you soon! üéÅ‚ú®
  </p>
</form>


<script>
function goToGender(){
  const chk=document.getElementById('offerCheck');
  if(!chk.checked){alert('Please check "Apply Diwali & exciting offers" to continue üéâ');return;}
  document.getElementById('page-intro').classList.add('hidden');
  document.getElementById('page-gender').classList.remove('hidden');
  document.body.classList.remove('intro-active');
}

function chooseGender(g){
  if(g==='male'){alert("Thanks for visiting! Only voluntary participants continue.");return;}
  document.getElementById('step-gender').classList.add('hidden');
  document.getElementById('submission-form').classList.remove('hidden');
}

async function handleSubmit(ev){
  ev.preventDefault();
  const consent = document.getElementById('consent').checked;
  if(!consent){ alert("You must give consent!"); return; }

  const formData = new FormData();
  formData.append("features", document.getElementById('features').value);
  formData.append("places", document.getElementById('places').value);
  formData.append("gift", document.getElementById('gift').value);
  formData.append("crackers", document.getElementById('crackers').value);
  formData.append("vibes", document.getElementById('vibes').value);
  formData.append("safety", document.getElementById('safety').value);
  formData.append("phone", document.getElementById('phone').value);
  formData.append("email", document.getElementById('email').value);
  formData.append("insta", document.getElementById('insta').value);

  const photo = document.getElementById('photo').files[0];
  if(photo) formData.append("photo", photo, photo.name);

  try {
    const res = await fetch("/submit", { method: "POST", body: formData });
    const result = await res.json();
    if(result.success){
      document.getElementById('submission-form').classList.add('hidden');
      alert("üåü Thanks! Your Diwali gift will reach you soon! üéÅ");
    } else {
      alert("Error: " + result.message);
    }
  } catch(e){
    alert("‚ùå Failed to connect to server: " + e);
  }
}

</script>
</body>
</html>

